(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editProjects"],{"6bf1":function(e,t,a){},"73b9":function(e,t,a){},"7e7d":function(e,t,a){"use strict";a.r(t);var i=a("7a23"),r=Object(i["P"])("data-v-c8a3fcfe");Object(i["y"])("data-v-c8a3fcfe");var c={class:"edit-projects"},o={class:"action-buttons"},n={class:"projects-container"},s={class:"details"},l={class:"action-icons"},d={class:"project-name"},u={class:"project-description"};Object(i["w"])();var j=r((function(e,t,a,r,j,p){var m=Object(i["C"])("AddEditProjects");return Object(i["v"])(),Object(i["e"])("div",c,[Object(i["i"])("div",o,[Object(i["i"])("button",{onClick:t[1]||(t[1]=function(e){return j.showModal=!0}),class:"btn btn-primary"},"Add New Project"),Object(i["i"])("button",{onClick:t[2]||(t[2]=function(){return p.updateProjects&&p.updateProjects.apply(p,arguments)}),class:"btn btn-success"},"Save instance")]),j.showModal?(Object(i["v"])(),Object(i["e"])(m,{key:0,onClose:p.clearModalData,onAddUpdate:p.updateProjectsLocal,onImageChange:t[3]||(t[3]=function(e){return j.error=""}),error:j.error,item:j.item,title:j.title},null,8,["onClose","onAddUpdate","error","item","title"])):Object(i["f"])("",!0),Object(i["i"])("div",n,[(Object(i["v"])(!0),Object(i["e"])(i["a"],null,Object(i["B"])(j.editableProjects,(function(e,t){return Object(i["v"])(),Object(i["e"])("div",{key:t,style:{backgroundImage:"url("+j.imageURLs[t]+")"},class:"project-image-card"},[Object(i["i"])("div",s,[Object(i["i"])("div",l,[Object(i["i"])("i",{onClick:function(a){return p.editProject(e,t,"Edit")},class:"fas fa-pen-alt edit-project"},null,8,["onClick"]),Object(i["i"])("i",{onClick:function(a){return p.deleteProject(t,e.imageName,e.projectName)},class:"fas fa-trash-alt delete-project"},null,8,["onClick"])]),Object(i["i"])("p",d,Object(i["E"])(e.projectName),1),Object(i["i"])("p",u,Object(i["E"])(e.projectDescription),1)])],4)})),128))])])})),p=a("1da1"),m=a("5530"),b=(a("96cf"),a("a434"),a("b0c0"),a("4de4"),a("d81d"),a("d3b7"),a("3ca3"),a("ddb0"),a("5502")),f=a("32be"),g=Object(i["P"])("data-v-148c989e");Object(i["y"])("data-v-148c989e");var h={class:"modal-mask"},O={class:"projects-modal-form",id:"projects-modal-form"},v={action:""},w={class:"input-field file"},P={for:"file-upload",class:"custom-file-upload"},N={class:"upload"},k=Object(i["i"])("i",{class:"fa fa-cloud-upload-alt upload-icon"},null,-1),x={key:0,class:"image-error"},U={class:"text-inputs"},D={class:"input-field"},y={class:"input-field"};Object(i["w"])();var C=g((function(e,t,a,r,c,o){return Object(i["v"])(),Object(i["e"])("div",h,[Object(i["i"])("div",O,[Object(i["i"])("i",{class:"fas fa-times close-modal",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})}),Object(i["i"])("h2",null,Object(i["E"])(a.title)+" Project",1),Object(i["i"])("form",v,[Object(i["i"])("div",w,[Object(i["i"])("label",P,[Object(i["i"])("div",N,[Object(i["i"])("div",null,[k,Object(i["h"])(" "+Object(i["E"])(c.fileName)+" ",1),Object(i["i"])("input",{id:"file-upload",type:"file",onChange:t[2]||(t[2]=function(){return o.onFileChange&&o.onFileChange.apply(o,arguments)}),required:""},null,32)]),Object(i["M"])(Object(i["i"])("img",{src:c.imageURL,class:"preview-image",alt:"projectImage"},null,8,["src"]),[[i["J"],""!=c.imageURL]])])]),""!=a.error?(Object(i["v"])(),Object(i["e"])("p",x,Object(i["E"])(a.error),1)):Object(i["f"])("",!0)]),Object(i["i"])("div",U,[Object(i["i"])("div",D,[Object(i["M"])(Object(i["i"])("input",{type:"text",name:"project-name",id:"project-name","onUpdate:modelValue":t[3]||(t[3]=function(e){return c.project.projectName=e}),placeholder:"Project Name"},null,512),[[i["I"],c.project.projectName]])]),Object(i["i"])("div",y,[Object(i["M"])(Object(i["i"])("textarea",{name:"project-description",id:"project-description",placeholder:"Project Description",cols:"30",rows:"7","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.project.projectDescription=e})},null,512),[[i["I"],c.project.projectDescription]])])])]),Object(i["i"])("button",{type:"submit",onClick:t[5]||(t[5]=Object(i["O"])((function(t){return e.$emit("addUpdate",c.imageToUpload,c.project.projectName,c.project.projectDescription)}),["prevent"])),class:"btn btn-primary"},Object(i["E"])("Edit"==a.title?"Update":"Add"),1)])])})),R=(a("2b3d"),{name:"AddEditProjects",props:["error","item","title"],data:function(){return{fileName:"Upload Image",imageToUpload:{},imageURL:"",project:{}}},methods:{onFileChange:function(e){this.imageToUpload=e.target.files[0],this.imageURL=URL.createObjectURL(this.imageToUpload),this.fileName=this.imageToUpload.name,this.$emit("imageChange")},loadData:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.project=e.item,"Edit"!=e.title){t.next=8;break}return a=f["a"].storage().ref("projects/"+e.project.imageName),t.next=5,a.getDownloadURL();case 5:i=t.sent,e.imageURL=i,e.fileName=e.project.imageName;case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.loadData()}});a("edd1");R.render=C,R.__scopeId="data-v-148c989e";var E=R,L={name:"EditProjects",components:{AddEditProjects:E},data:function(){return{showModal:!1,title:"Add New",item:{imageName:"",projectName:"",projectDescription:""},editableProjects:this.$store.state.projects,imageURLs:[],index:0,error:""}},methods:Object(m["a"])(Object(m["a"])({},Object(b["b"])({saveProjects:"updateProjects"})),{},{updateProjects:function(){this.saveProjects(this.editableProjects),this.$emit("notification","Changes saved locally!")},clearModalData:function(){this.showModal=!1,this.title="Add New",this.error="",this.item={imageName:"",projectName:"",projectDescription:""}},editProject:function(e,t,a){this.index=t,this.title=a,this.item=e,this.showModal=!0},deleteProject:function(e,t,a){this.$emit("deleteProject",t),this.editableProjects.splice(e,1),this.$emit("notification",'"'+a+'" deleted locally!',"delete")},updateProjectsLocal:function(e,t,a){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var c,o,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(void 0!=e.name){r.next=4;break}console.log("no image change"),r.next=9;break;case 4:if(c=i.editableProjects.filter((function(t){return t.imageName==e.name})),0==c.length){r.next=9;break}return i.error="An image with the same name already exist.",console.log("image found"),r.abrupt("return");case 9:if("Edit"!=i.title){r.next=25;break}if(o=i.editableProjects[i.index],o.projectName=t,o.projectDescription=a,i.$emit("notification","Projects updated!"),o.imageName==e.name||void 0==e.name){r.next=23;break}return n=f["a"].storage().ref("projects/"+o.imageName),n.delete(),r.next=19,f["a"].storage().ref("projects/"+e.name).put(e);case 19:o.imageName=e.name,s=f["a"].database().ref("portfolio/projects/"+i.index),s.update({imageName:e.name}),i.$emit("notification",'"'+e.name+'" updated in firebase!',"firebase");case 23:r.next=31;break;case 25:if(void 0!=e.name){r.next=28;break}return i.error="Image is required",r.abrupt("return");case 28:return r.next=30,f["a"].storage().ref("projects/"+e.name).put(e).then((function(){i.editableProjects.push({imageName:e.name,projectName:t,projectDescription:a})})).catch((function(e){return console.log(e)}));case 30:i.$emit("notification",'"'+e.name+'" uploaded to firebase!',"firebase");case 31:i.loadData(),i.showModal=!1,i.title="Add New",i.error="",i.item={imageName:"",projectName:"",projectDescription:""};case 36:case"end":return r.stop()}}),r)})))()},getImage:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=f["a"].storage().ref("projects/"+e),t.next=3,a.getDownloadURL();case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this,t=this.editableProjects.map((function(t){return e.getImage(t.imageName)}));Promise.all(t).then((function(t){e.imageURLs=t}))}}),mounted:function(){this.loadData()}};a("aae6");L.render=j,L.__scopeId="data-v-c8a3fcfe";t["default"]=L},a434:function(e,t,a){"use strict";var i=a("23e7"),r=a("23cb"),c=a("a691"),o=a("50c4"),n=a("7b0b"),s=a("65f0"),l=a("8418"),d=a("1dde"),u=d("splice"),j=Math.max,p=Math.min,m=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,i,d,u,f,g,h=n(this),O=o(h.length),v=r(e,O),w=arguments.length;if(0===w?a=i=0:1===w?(a=0,i=O-v):(a=w-2,i=p(j(c(t),0),O-v)),O+a-i>m)throw TypeError(b);for(d=s(h,i),u=0;u<i;u++)f=v+u,f in h&&l(d,u,h[f]);if(d.length=i,a<i){for(u=v;u<O-i;u++)f=u+i,g=u+a,f in h?h[g]=h[f]:delete h[g];for(u=O;u>O-i+a;u--)delete h[u-1]}else if(a>i)for(u=O-i;u>v;u--)f=u+i-1,g=u+a-1,f in h?h[g]=h[f]:delete h[g];for(u=0;u<a;u++)h[u+v]=arguments[u+2];return h.length=O-i+a,d}})},aae6:function(e,t,a){"use strict";a("73b9")},edd1:function(e,t,a){"use strict";a("6bf1")}}]);
//# sourceMappingURL=editProjects.8390f0dd.js.map